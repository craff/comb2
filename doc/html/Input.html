<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Regexp.html">
<link rel="next" href="Position.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Grammar" rel="Chapter" href="Grammar.html">
<link title="Combinator" rel="Chapter" href="Combinator.html">
<link title="Lex" rel="Chapter" href="Lex.html">
<link title="Regexp" rel="Chapter" href="Regexp.html">
<link title="Input" rel="Chapter" href="Input.html">
<link title="Position" rel="Chapter" href="Position.html">
<link title="Earley" rel="Chapter" href="Earley.html"><link title="Type" rel="Section" href="#2_Type">
<link title="Reading from a buffer" rel="Section" href="#2_Readingfromabuffer">
<link title="Creating a buffer" rel="Section" href="#2_Creatingabuffer">
<link title="Buffer manipulation functions" rel="Section" href="#2_Buffermanipulationfunctions">
<title>Input</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Regexp.html" title="Regexp">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Position.html" title="Position">Next</a>
</div>
<h1>Module <a href="type_Input.html">Input</a></h1>

<pre><span id="MODULEInput"><span class="keyword">module</span> Input</span>: <code class="code">sig</code> <a href="Input.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>A module providing efficient input buffers with preprocessing.</p>
</div>
</div>
<hr width="100%">
<h3 id="2_Type">Type</h3>
<pre><span id="TYPEbuffer"><span class="keyword">type</span> <code class="type"></code>buffer</span> </pre>
<div class="info ">
<div class="info-desc">
<p>The abstract type for an input buffer.</p>
</div>
</div>

<h3 id="2_Readingfromabuffer">Reading from a buffer</h3>
<pre><span id="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> char * <a href="Input.html#TYPEbuffer">buffer</a> * int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">read buf pos</code> returns the character at position <code class="code">pos</code> in the buffer
    <code class="code">buf</code>, together with the new buffer and position.</p>
</div>
</div>

<pre><span id="VALsub"><span class="keyword">val</span> sub</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> int -> string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">sub b i len</code> returns <code class="code">len</code> characters from position <code class="code">pos</code>. If the
    end of buffer is reached, the string is filed with eof '\255'</p>
</div>
</div>

<pre><span id="VALget"><span class="keyword">val</span> get</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> char</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get buf pos</code> returns the character at position <code class="code">pos</code> in the  buffer
    <code class="code">buf</code>.</p>
</div>
</div>
<h3 id="2_Creatingabuffer">Creating a buffer</h3>
<pre><span id="VALfrom_file"><span class="keyword">val</span> from_file</span> : <code class="type">string -> <a href="Input.html#TYPEbuffer">buffer</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">from_file fn</code> returns a buffer constructed using the file <code class="code">fn</code>.</p>
</div>
</div>

<pre><span id="VALfrom_channel"><span class="keyword">val</span> from_channel</span> : <code class="type">?filename:string -> Stdlib.in_channel -> <a href="Input.html#TYPEbuffer">buffer</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">from_channel ~filename ch</code> returns a buffer constructed  using  the
    channel <code class="code">ch</code>. The optional <code class="code">filename</code> is only used as a reference to
    the channel in error messages.</p>
</div>
</div>

<pre><span id="VALfrom_string"><span class="keyword">val</span> from_string</span> : <code class="type">?filename:string -> string -> <a href="Input.html#TYPEbuffer">buffer</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">from_string ~filename str</code> returns a buffer constructed  using  the
    string <code class="code">str</code>. The optional <code class="code">filename</code> is only used as a reference to
    the channel in error messages.</p>
</div>
</div>

<pre><span id="VALfrom_fun"><span class="keyword">val</span> from_fun</span> : <code class="type">('a -> unit) -> string -> ('a -> string) -> 'a -> <a href="Input.html#TYPEbuffer">buffer</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">from_fun finalise name get data</code> returns a buffer constructed  from
    the object <code class="code">data</code> using the <code class="code">get</code> function. The get function is used
    to obtain one line of input from <code class="code">data</code>. The <code class="code">finalise</code> function  is
    applied to <code class="code">data</code> when the end of file is reached. The <code class="code">name</code> string
    is used to reference the origin of the data in error messages.</p>
</div>
</div>

<pre><span id="EXCEPTIONPreprocessor_error"><span class="keyword">exception</span> Preprocessor_error</span> <span class="keyword">of</span> <code class="type">string * string</code></pre>
<div class="info ">
<div class="info-desc">
<p>Exception that can be raised by a preprocessor in case of error. The
    first string references the name of the buffer (e.g. the name of the
    corresponding file) and the second string contains the message.</p>
</div>
</div>

<pre><span id="VALpp_error"><span class="keyword">val</span> pp_error</span> : <code class="type">string -> string -> 'a</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">pp_error name msg</code> raises <code class="code">Preprocessor_error(name,msg)</code>.</p>
</div>
</div>

<pre><span id="MODULETYPEPreprocessor"><span class="keyword">module type</span> <a href="Input.Preprocessor.html">Preprocessor</a></span> = <code class="code">sig</code> <a href="Input.Preprocessor.html">..</a> <code class="code">end</code></pre><div class="info">
<p>Specification of a preprocessor.</p>

</div>

<pre><span id="MODULEWithPP"><span class="keyword">module</span> <a href="Input.WithPP.html">WithPP</a></span>: <div class="sig_block"><code class="code">functor (</code><code class="code">PP</code><code class="code"> : </code><code class="type"><a href="Input.Preprocessor.html">Preprocessor</a></code><code class="code">) -&gt; </code><code class="code">sig</code> <a href="Input.WithPP.html">..</a> <code class="code">end</code></div></pre><div class="info">
<p>Functor for building buffers with a preprocessor.</p>

</div>
<h3 id="2_Buffermanipulationfunctions">Buffer manipulation functions</h3>
<pre><span id="VALis_empty"><span class="keyword">val</span> is_empty</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">is_empty buf</code> test whether the buffer <code class="code">buf</code> is empty.</p>
</div>
</div>

<pre><span id="VALline_num"><span class="keyword">val</span> line_num</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">line_num buf</code> returns the current line number of <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALline_offset"><span class="keyword">val</span> line_offset</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">line_beginning buf</code> returns the offset of the current line  in  the
    buffer <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALline"><span class="keyword">val</span> line</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">line buf</code> returns the current line in the buffer <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALline_length"><span class="keyword">val</span> line_length</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">line_length buf</code> returns the length of  the  current  line  in  the
    buffer <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALutf8_col_num"><span class="keyword">val</span> utf8_col_num</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">utf8_col_num buf pos</code> returns the utf8 column number  corresponding
    to the position <code class="code">pos</code> in <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALnormalize"><span class="keyword">val</span> normalize</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> <a href="Input.html#TYPEbuffer">buffer</a> * int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">normalize buf pos</code> ensures that <code class="code">pos</code> is less than  the  length  of
    the current line in <code class="code">str</code>.</p>
</div>
</div>

<pre><span id="VALfilename"><span class="keyword">val</span> filename</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">filename buf</code> returns the file name associated to the <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALbuffer_uid"><span class="keyword">val</span> buffer_uid</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">buffer_uid buf</code> returns a unique identifier for <code class="code">buf</code>.</p>
</div>
</div>

<pre><span id="VALbuffer_equal"><span class="keyword">val</span> buffer_equal</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> <a href="Input.html#TYPEbuffer">buffer</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">buffer_eq b1 b2</code> tests the equality of <code class="code">b1</code> and <code class="code">b2</code>.</p>
</div>
</div>

<pre><span id="VALbuffer_compare"><span class="keyword">val</span> buffer_compare</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> <a href="Input.html#TYPEbuffer">buffer</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">buffer_compare b1 b2</code> compares <code class="code">b1</code> and <code class="code">b2</code>.</p>
</div>
</div>

<pre><span id="VALbuffer_before"><span class="keyword">val</span> buffer_before</span> : <code class="type"><a href="Input.html#TYPEbuffer">buffer</a> -> int -> <a href="Input.html#TYPEbuffer">buffer</a> -> int -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">leq_bug b1 i1 b2 i2</code> returns true if the position <code class="code">b1, i1</code> is before
    <code class="code">b2, i2</code>. Gives meaningless result if <code class="code">b1</code> and <code class="code">b2</code> do not refer to the
    same file.</p>
</div>
</div>

<pre><span id="MODULETbl"><span class="keyword">module</span> <a href="Input.Tbl.html">Tbl</a></span>: <code class="code">sig</code> <a href="Input.Tbl.html">..</a> <code class="code">end</code></pre><div class="info">
<p>Table to associate value to positions in input buffers</p>

</div>
</body></html>
